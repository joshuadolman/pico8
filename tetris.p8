pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
cellsize=4

framecounter=0

droptime=0
dropmult=1
dropspeedup=1

dotx=5
doty=0

grid={}

function _init()
	init_grid(10,20)
end

function init_grid(maxx,maxy)
	for _x=0,maxx-1 do
		grid[_x]={}
		for _y=0,maxy-1 do
			grid[_x][_y]=0
		end
	end
end
-->8
function _update60()
	if btn(3) then
		dropmult=2
	else
		dropmult=1
	end
	if btn(1) then
		doty=0
	end

	framecounter+=1
	dropspeedup+=0.0001
	droptime=flr(max(5,60/dropspeedup)/dropmult)
	if framecounter%droptime==0 then
		framecounter=0
		doty+=1
	end
end
-->8
function _draw()
	cls(1)
	draw_grid(10,20)
	draw_block(dotx,doty)
	print(droptime,80,10,8)
	--print_grid()
end

function draw_grid(gridsizex,gridsizey)
	for y=0,#grid[1] do
		for x=0,#grid do
			--rect(x*cellsize,y*cellsize,(x+1)*cellsize,(y+1)*cellsize,0)
			rect(x*cellsize,y*cellsize,(x+1)*cellsize,(y+1)*cellsize,0)
		end
	end
end

function draw_block(px,py)
	spr(48,1+(px*cellsize),1+(py*cellsize))
end

function print_grid()
	for y=0,19 do
		for x=0,9 do
			print(grid[x][y],(x*5)+1,(y*6)+1,7)
		end
	end
end

__gfx__
00000000ddd2ddd2ddd20000666c666c666c666c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000d221d221d22100006ccd6ccd6ccd6ccd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700d221d221d22100006ccd6ccd6ccd6ccd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770002111211121110000cdddcdddcdddcddd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000000ddd20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000000d2210000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000d2210000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000021110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77760000ddd200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76650000d22100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76650000d22100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
65550000211100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
